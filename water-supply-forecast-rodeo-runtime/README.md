# Water Supply Forecast Rodeo

![Python 3.10](https://img.shields.io/badge/Python-3.10-blue) [![DrivenData Water Supply Forecast Rodeo](https://img.shields.io/badge/DrivenData-Water%20Supply%20Forecast%20Rodeo-white?logo=data:image/png;base64,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)](https://watersupply.drivendata.org/)

Welcome to the data and runtime repository the [Water Supply Forecast Rodeo](https://watersupply.drivendata.org/) competition on DrivenData! This repository contains a few things:

1. **Data download code** ([`data_download/`](./data_download/)) — a Python package with a code and a CLI for downloading data for each [approved feature data source](https://www.drivendata.org/competitions/254/reclamation-water-supply-forecast-dev/page/801/). DrivenData will download datasets from certain approved data sources and mount it to the competition runtime for code execution submissions. Use the CLI to reproduce the saved file structure in the runtime.
2. **Data reading code** ([`data_reading/`](./data_reading/)) — a Python library with example code for loading each of the feature datasets downloaded by the data download package, available for you to optionally use. It will be installed in the code execution runtime environment and you will be able to import it.

You can use this repository to:

⬇️ **Get feature data**: The same code that is used to get feature data for the runtime environment is available for you to use locally.

Additional items, such as the specification for the code execution runtime image, will be added as they become available.

## Data download

This repo contains a Python package named `wsfr-download` located in the `data_download/` directory. It provides a command-line interface (CLI) for downloading approved challenge datasets. DrivenData will use this package to download the test feature data that will be made available to the code execution runtime. You can use it to download feature data in the same way for testing your submission or for training.

> [!NOTE]
> Challenge organizers are still adding download code for approved data sources. You will find that code here as it becomes available.

### Requirements and installation

Requires Python 3.10. To install with the exact dependencies that will be used by DrivenData, create a new virtual environment and run

```bash
pip install -r ./data_download/requirements.txt
pip install ./data_download/
```

### Usage

To simply download all test feature data that will be available, use the `bulk` command. From the repository root as your working directory, run:

```bash
python -m wsfr_download bulk data_download/hindcast_test_config.yml
```

#### Details

You can invoke the CLI with `python -m wsfr_download`. For example, to see a list of all available commands:

```bash
python -m wsfr_download --help
```

The CLI is organized with one command per data source, e.g., see

```bash
python -m wsfr_download grace_indicators --help
```

There is also the `bulk` command for downloading multiple data sources at once, as shown in the previous section. A bulk download is configured by a YAML configuration file. The configuration file for the Hindcast test set is [`data_download/hindcast_test_config.yml`](data_download/hindcast_test_config.yml). To download feature data for training, create your own YAML configuration file for the years and data sources that you need using the test set file as an example.

By default, data is saved into a subdirectory named `data/` relative to your current working directory. You can explicitly override this by setting the environment variable `WSFR_DATA_ROOT`.

## Data reading

This repo contains a Python package named `wsfr-read` located in the `data_reading/` directory. It provides a library with example functions to read the data downloaded by `wsfr-download`. This package will be installed into the code execution runtime for you to optionally use during inference on the test set.

> [!NOTE]
> Challenge organizers are still adding reading code for approved data sources. You will find that code here as it becomes available.

### Requirements and installation

Requires Python 3.10. Install with pip:

```bash
pip install ./data_reading/
```

### Usage

Modules are provided with names matching the data source names in the `wsfr-download` package. Each module contains `read_*_data` functions that are basic ways you can load that data for use as features for your models. See the docstrings on the functions for more details on usage.

By default, data is assumed to be in a subdirectory named `data/` relative to your current working directory. You can explicitly override this by setting the environment variable `WSFR_DATA_ROOT`.
